{% extends "index.html" %}
{% block content %}
 <!--<h1>{{word}}</h1>-->
<table class="blueTable">
    <thead>
    <tr>
        {% for i in num_title %}
        <td>{{title[i]}}</td>
        {% endfor %}
        <td>Edit</td>
        <td>Delete</td>
    </tr>
    </thead>
    <tfoot>
    <!--<tr>
    <td colspan="42"> 
    <div class="links"><a href="#">&laquo;</a> <a class="active" href="#">1</a> <a href="#">2</a> <a href="#">3</a> <a href="#">4</a> <a href="#">&raquo;</a></div>
    </td>
    </tr>-->
    <h1 style="text-align: center;font-family: system-ui;">Current csv file : {{file}}</h1> 
    </tfoot>
    <tbody>
        <tr>
            {% for i in num_total %}
            <tr>
                {% for j in num_list %}
                    <td>{{arr[i][0][j]}}</td>
                {% endfor %}
                <!-- <form class="editrow" method="POST" action="/edit">
                    <td><button value="{{arr[i][1], i}}" name = "edit_row"><img src="{{ url_for('static', filename='images/edit.jpg') }}" alt="edit"></button>
                    </td>
                </form> -->
                <td>
                    <button onclick="togglePopup(this.id)" name="edit_{{i}}" class="first-button" id = {{i}}>
                        <img src="{{ url_for('static', filename='images/edit.jpg') }}" alt="logo">
                    </button>
                    <div class="popup" id="popup-{{i}}">
                        <div class="content">
                            <div class="close-btn" onclick="togglePopup(this.id)" id = {{i}}><img src="{{ url_for('static', filename='images/cancel.png') }}" id="cancel"></div>
                                <h1>Update fields</h1> 
                                <form class = "update_row" method ="POST" action="\edit"> 
                                    <button id="second-button{{i}}" value="0" name = "row"><img src="{{ url_for('static', filename='images/save.png') }}" id="save"></button>
                                    <div id="input-field" class="input-field"></div>
                                    {% for idx,title in enumerate(title) %}<p>{{title}}</p>
                                            <input id="input-something" name = "h{{idx}}" value="{{arr[i][0][idx]}}" = "text" class="validate">
                                    {% endfor %}
                                    </div>
                                </form>
                        </div>
                    </div>
                </td>
                <form class="delrow" method="POST" action="/del">
                    <td><button value="{{arr[i][1], i}}" name = "delete_row"><img src="{{ url_for('static', filename='images/trash.jpg') }}" alt="trash"></button>
                    </td>
                </form>
            </tr>
            {% endfor %}
        </tr>
    </tbody>
</table> 
<script>
    function togglePopup(clicked_id) {
          if(typeof clicked_id !== undefined){
              document.getElementById("second-button"+clicked_id).value = clicked_id;
              document.getElementById("popup-"+clicked_id).classList.toggle("active");
          }
    }
</script>
{% endblock %}